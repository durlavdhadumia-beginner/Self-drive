{% extends "base.html" %}
{% block title %}Feedback Inbox | DriveNow{% endblock %}
{% block content %}
<section class="py-5">
    <div class="container">
        <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-3 mb-4">
            <div>
                <h1 class="h4 fw-bold mb-1">General feedback inbox</h1>
                <p class="text-muted mb-0">Review platform feedback submitted by renters and hosts. Click an item to read the full details.</p>
            </div>
            <a href="{{ url_for('admin_dashboard') }}" class="btn btn-outline-success"><i class="bi bi-speedometer2"></i> Back to dashboard</a>
        </div>
        {% if feedback_entries %}
            <div class="card card-zoom">
                <div class="card-body p-0">
                    <div class="list-group list-group-flush">
                        {% for entry in feedback_entries %}
                            <a class="list-group-item list-group-item-action d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-2" href="{{ url_for('admin_feedback_detail', feedback_id=entry['id']) }}">
                                <div>
                                    <div class="fw-semibold">{{ entry['username'] }} <span class="text-muted small">({{ entry['role']|capitalize }})</span></div>
                                    <div class="text-muted small">{{ entry['category'] }} &middot; {{ entry['created_at'] }}</div>
                                    {% if entry['car_name'] or entry['brand'] or entry['model'] %}
                                        <div class="text-muted small">Booking: {{ entry['car_name'] or (entry['brand']|default('', true) ~ ' ' ~ entry['model']|default('', true)) }} &mdash; {{ entry['start_time'] or '-' }} to {{ entry['end_time'] or 'TBD' }}</div>
                                    {% endif %}
                                </div>
                                <span class="badge bg-success-subtle text-success">View</span>
                            </a>
                        {% endfor %}
                    </div>
                </div>
            </div>
        {% else %}
            <div class="alert alert-success" role="alert">
                No feedback messages yet. You're all caught up!
            </div>
        {% endif %}
    </div>
</section>
{% endblock %}
