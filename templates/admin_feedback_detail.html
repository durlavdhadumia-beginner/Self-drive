{% extends "base.html" %}
{% block title %}Feedback Detail | DriveNow{% endblock %}
{% block content %}
<section class="py-5">
    <div class="container">
        <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-3 mb-4">
            <div>
                <h1 class="h4 fw-bold mb-1">Feedback detail</h1>
                <p class="text-muted mb-0">Submitted by {{ feedback['username'] }} ({{ feedback['role']|capitalize }}) on {{ feedback['created_at'] }}.</p>
            </div>
            <div class="d-flex gap-2">
                <a href="{{ url_for('admin_feedback_list') }}" class="btn btn-outline-secondary"><i class="bi bi-inbox"></i> All feedback</a>
                <a href="{{ url_for('admin_dashboard') }}" class="btn btn-outline-success"><i class="bi bi-speedometer2"></i> Dashboard</a>
            </div>
        </div>

        <div class="card card-zoom mb-4">
            <div class="card-body">
                <div class="mb-3">
                    <span class="badge bg-success-subtle text-success">{{ feedback['category'] }}</span>
                </div>
                <h2 class="h5 fw-semibold mb-3">Description</h2>
                <p class="mb-0">{{ feedback['description'] }}</p>
            </div>
        </div>

        {% if feedback['rental_id'] %}
            <div class="card card-zoom">
                <div class="card-body">
                    <h2 class="h6 fw-semibold mb-3">Linked booking</h2>
                    <ul class="list-unstyled text-muted small mb-0">
                        <li>ID: {{ feedback['rental_id'] }}</li>
                        {% if feedback['car_name'] or feedback['brand'] or feedback['model'] %}
                            <li>Vehicle: {{ feedback['car_name'] or (feedback['brand']|default('', true) ~ ' ' ~ feedback['model']|default('', true)) }}</li>
                        {% endif %}
                        {% if feedback['licence_plate'] %}
                            <li>Licence plate: {{ feedback['licence_plate'] }}</li>
                        {% endif %}
                        <li>Trip window: {{ feedback['start_time'] or '-' }} to {{ feedback['end_time'] or 'TBD' }}</li>
                    </ul>
                </div>
            </div>
        {% endif %}
    </div>
</section>
{% endblock %}
